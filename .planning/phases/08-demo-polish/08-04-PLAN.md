---
phase: 08-demo-polish
plan: 04
type: execute
wave: 2
depends_on: ["08-01", "08-02", "08-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 8 C++ classes compile and are available as Blueprint parent classes in the editor"
    - "UMG widget Blueprints exist for DocumentReader, TitleCard, and can be assigned to actors"
    - "Blueprint subclasses exist for NarrativeTriggerActor, InspectableActor, and are placeable in levels"
    - "ReadableActor Blueprint has DocumentReaderWidgetClass assigned"
  artifacts:
    - path: "Content/UI/WBP_DocumentReader.uasset"
      provides: "UMG Blueprint reparented to UDocumentReaderWidget"
    - path: "Content/UI/WBP_TitleCard.uasset"
      provides: "Simple title card widget for demo ending"
    - path: "Content/Narrative/BP_NarrativeTrigger.uasset"
      provides: "Blueprint subclass of ANarrativeTriggerActor"
    - path: "Content/Interaction/BP_InspectableActor.uasset"
      provides: "Blueprint subclass of AInspectableActor"
  key_links:
    - from: "WBP_DocumentReader"
      to: "UDocumentReaderWidget"
      via: "Reparent to C++ base class"
      pattern: "Parent class: DocumentReaderWidget"
    - from: "BP_InspectableActor"
      to: "WBP_DocumentReader"
      via: "DocumentReaderWidgetClass property set to WBP_DocumentReader"
      pattern: "DocumentReaderWidgetClass"
    - from: "BP_ReadableActor (existing)"
      to: "WBP_DocumentReader"
      via: "DocumentReaderWidgetClass property set to WBP_DocumentReader"
      pattern: "DocumentReaderWidgetClass"
---

<objective>
Create all UMG widget Blueprints and actor Blueprints needed for Phase 8 systems, then assign widget classes to actors. This is editor-only work that cannot be automated.

Purpose: The C++ base classes from Plans 01-03 need UMG Blueprints (with BindWidget children) and Blueprint subclasses (with asset references assigned) before they can function in-game. This checkpoint covers all Blueprint creation needed before level building.

Output: UMG widgets (WBP_DocumentReader, WBP_TitleCard), actor Blueprints (BP_NarrativeTrigger, BP_InspectableActor), and property assignments on existing Blueprints.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-demo-polish/08-RESEARCH.md
@.planning/phases/08-demo-polish/08-01-SUMMARY.md
@.planning/phases/08-demo-polish/08-02-SUMMARY.md
@.planning/phases/08-demo-polish/08-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Create UMG widget Blueprints</name>
  <action>
    Create these UMG widget Blueprints in the Unreal Editor:

    **1. WBP_DocumentReader** (Content/UI/)
    - Create Widget Blueprint, reparent to `DocumentReaderWidget` (C++ class)
    - Add required BindWidget children to the root Canvas Panel:
      - `TitleText` (Text Block) -- document title, centered top area, large font (~24pt), visible
      - `ContentText` (Text Block) -- document body, centered middle area, readable font (~16pt), auto-wrap enabled, visible
      - `InspectionImage` (Image) -- centered, large, collapsed by default (code will show/hide)
    - Style: dark semi-transparent background overlay (80% black), paper/parchment feel for text area
    - Add a hint text at the bottom: "Press E or Esc to close" (can be a simple TextBlock, not BindWidget)
    - Set: bIsFocusable = true (required for NativeOnKeyDown to receive input)

    **2. WBP_TitleCard** (Content/UI/)
    - Create Widget Blueprint (NO reparent needed -- plain UUserWidget is fine)
    - Add a single TextBlock centered on screen: "The Juniper Tree"
    - Font: large (~48pt), white, centered horizontally and vertically
    - Background: fully black (Canvas Panel with black background brush or a Border)
    - This is a simple static display widget -- no interaction needed

    **3. Verify existing WBP_Readable (if it exists)**
    - If BP_ReadableActor already exists from Phase 1 editor setup, open its class defaults
    - Set `DocumentReaderWidgetClass` to `WBP_DocumentReader`
    - If no BP_ReadableActor exists yet, create one: Blueprint Class -> Parent: ReadableActor, save as Content/Interaction/BP_ReadableActor
    - Set DocumentReaderWidgetClass = WBP_DocumentReader
  </action>
  <how-to-verify>
    1. Open WBP_DocumentReader, verify TitleText, ContentText, InspectionImage widgets exist with correct names
    2. Open WBP_TitleCard, verify title text "The Juniper Tree" is centered
    3. Compile all widget Blueprints -- no "missing BindWidget" errors
  </how-to-verify>
  <resume-signal>Type "widgets done" when all UMG Blueprints are created and compiled</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Create actor Blueprints and assign widget classes</name>
  <action>
    Create these actor Blueprints in the Unreal Editor:

    **1. BP_NarrativeTrigger** (Content/Narrative/)
    - Create Blueprint Class -> Parent: NarrativeTriggerActor
    - No additional configuration needed -- all properties are per-instance (EditAnywhere)
    - Verify TriggerBox is visible in the components panel

    **2. BP_InspectableActor** (Content/Interaction/)
    - Create Blueprint Class -> Parent: InspectableActor
    - In Class Defaults, set `DocumentReaderWidgetClass` = WBP_DocumentReader
    - Assign a placeholder static mesh (e.g., a small cube or SM_Prop if available) to the MeshComponent

    **3. Update BP_ReadableActor** (if not done in Task 1)
    - Open BP_ReadableActor Class Defaults
    - Set `DocumentReaderWidgetClass` = WBP_DocumentReader

    **4. Create BP_DemoEndingTrigger** (Content/Narrative/)
    - Create Blueprint Class -> Parent: NarrativeTriggerActor (reuse the trigger actor)
    - In the Blueprint editor, add a `DemoEndingManager` component (Add Component -> DemoEndingManager)
    - On the DemoEndingManager component, set `TitleCardWidgetClass` = WBP_TitleCard
    - In the Event Graph: bind the actor's OnNarrativeTriggered event to call DemoEndingManager->TriggerEnding()
    - This creates the "ending trigger" that fades to black and shows the title card when the player walks through it
  </action>
  <how-to-verify>
    1. BP_NarrativeTrigger compiles and can be placed in a level
    2. BP_InspectableActor compiles, has DocumentReaderWidgetClass set to WBP_DocumentReader
    3. BP_ReadableActor has DocumentReaderWidgetClass set to WBP_DocumentReader
    4. BP_DemoEndingTrigger has a DemoEndingManager component with TitleCardWidgetClass = WBP_TitleCard
    5. BP_DemoEndingTrigger Event Graph has OnNarrativeTriggered -> TriggerEnding wiring
  </how-to-verify>
  <resume-signal>Type "blueprints done" when all actor Blueprints are created and configured</resume-signal>
</task>

</tasks>

<verification>
1. All UMG Blueprints compile without BindWidget errors
2. All actor Blueprints compile and are placeable in levels
3. DocumentReaderWidgetClass is assigned on both BP_ReadableActor and BP_InspectableActor
4. BP_DemoEndingTrigger has ending sequence wired: overlap -> OnNarrativeTriggered -> TriggerEnding
</verification>

<success_criteria>
- WBP_DocumentReader, WBP_TitleCard exist as valid compiled UMG Blueprints
- BP_NarrativeTrigger, BP_InspectableActor, BP_DemoEndingTrigger exist as valid compiled actor Blueprints
- Widget class assignments are correct on all actors that need them
- All assets are ready for level placement in Plan 05
</success_criteria>

<output>
After completion, create `.planning/phases/08-demo-polish/08-04-SUMMARY.md`
</output>
